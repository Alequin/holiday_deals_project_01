<% hotel = @holiday.get_hotel() %>
<% agent = @holiday.get_travel_agent() %>
<% deals = @holiday.get_deals() %>
<% deals = deals.sort() {|deal1, deal2| deal2.percentage_off <=> deal1.percentage_off } %>
<% cost = @holiday.cost_per_person %>

<div id="show_holidays_main_container">
  <aside id="show_holidays_aside">
    <h3>Deals For This Holiday</h3>
    <ul>
      <% deals.each() do |deal| %>
        <li>
          <% deal_cost = deal.calc_cost_after_deal_applied(@holiday.cost_per_person) %>
          <p class="small_text">£<%= deal_cost %> - <%= deal.percentage_off %>% off</p>
          <p class="small_text">From: <%= deal.start_date.to_s %></p>
          <p class="small_text">Till: <%= deal.end_date.to_s %></p>
        </li>
      <% end %>
    </ul>
  </aside>

  <section id="show_holidays_section">
      <h2><%= hotel.name %></h2>
      <h3>City - Country</h3>
      <section>
        <div>
          <img id="show_holiday_hotel_img" class="rounded_border" src="<%= hotel.image_url %>" alt="<%= hotel.name %>'s image'">
        </div>
        <div>
          <p class="medium_text">£<%= cost %> per night</p>
          <p class="medium_text">Number of Nights: <%= @holiday.nights %></p>
          <p>Provided By</p>
          <img id="show_holidy_agent_logo" src="<%= agent.logo_url %>" alt="">
          <p><%= agent.name %></p>
        </div>
      </section>
      <article>
        <h4>Hotel</h4>
        <p class="small_text"><%= hotel.description %></p>
        <h4>City</h4>
        <p class="small_text">Details to come later</p>
        <h4>Country</h4>
        <p class="small_text">Details to come later</p>
      </article>
  </section>
</div>
